<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Espace abonnés</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f5f5f5; }
        .container { background: #fff; padding: 30px; margin: 40px auto; max-width: 1100px; border-radius: 8px; box-shadow: 0 0 10px #ccc; }
        h2 { text-align: center; color: #2c3e50; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ccc; padding: 10px; text-align: left; }
        th { background: #2980b9; color: #fff; }
        tr:nth-child(even) { background: #f2f2f2; }
        a.btn, button.btn { 
            padding: 6px 16px; 
            border-radius: 4px; 
            background: #2980b9; 
            color: #fff; 
            border: none; 
            text-decoration: none; 
            margin-right: 10px;
            margin-bottom: 3px;
            display: inline-block;
            font-size: 15px;
            cursor: pointer;
        }
        button.btn-danger {
            background: #e74c3c;
        }
        .success { color: green; text-align: center; margin-top: 15px; }
        form { display: inline; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Espace Abonnés</h2>
        <div th:if="${param.success}">
            <p class="success">Abonné enregistré avec succès !</p>
        </div>
        <div th:if="${param.modified}">
            <p class="success">Abonné modifié avec succès !</p>
        </div>
        <a href="/abonnes/new" class="btn">Ajouter un abonné</a>
        <table>
            <thead>
                <tr>
                    <th>N°</th>
                    <th>Nom</th>
                    <th>Prénom</th>
                    <th>Sexe</th>
                    <th>Téléphone</th>
                    <th>Ville</th>
                    <th>Secteur</th>
                    <th>Mail</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="abonne, iterStat : ${abonnes}">
                    <td th:text="${iterStat.index + 1}"></td> <!-- Numéro d'ordre -->
                    <td th:text="${abonne.nom}"></td>
                    <td th:text="${abonne.prenom}"></td>
                    <td th:text="${abonne.sexe}"></td>
                    <td th:text="${abonne.numTelephone}"></td>
                    <td th:text="${abonne.ville}"></td>
                    <td th:text="${abonne.secteur}"></td>
                    <td th:text="${abonne.mail}"></td>
                    <td>
                        <a th:href="@{'/abonnes/edit/' + ${abonne.id}}" class="btn">Modifier</a>
                        <form th:action="@{'/abonnes/delete/' + ${abonne.id}}" method="post" style="display:inline;">
                            <button type="submit" class="btn btn-danger" onclick="return confirm('Supprimer cet abonné ?')">Supprimer</button>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</body>
</html>